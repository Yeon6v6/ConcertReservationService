# 시나리오 2 : 동시성 및 대기열 제어 검증

## **목표**

* 동일 좌석에 대해 다수 사용자가 동시에 예약을 시도할 때, 대기열 제어 로직과 동시성 락(예: optimistic/pessimistic locking)이 올바르게 작동하는지 확인
* DeadLock이나 데이터 정합성 문제 없이 임시 배정 및 자동 해제 로직이 정상 동작하는지 검증

## **테스트 흐름**

1. 동일 좌석 번호에 대해 100명 이상의 사용자가 거의 동시에 좌석 예약 요청 API 호출
2. 예약 요청 시 대기열 토큰 및 예약 락 처리 과정을 모니터링
3. 일부 사용자는 결제 미완료 상황을 시뮬레이션하여 임시 예약이 해제되는지 확인

## **검증 포인트**

* 응답 시간: 경쟁 상황에서도 500ms 이내 유지
* 에러율: DeadLock 발생 없이 1% 미만
* DB 로그 및 Slow Query 모니터링을 통해 인덱스/캐싱 효과 확인
